<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>声明式编程和命令式编程 |  </title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/noteJS/favicon.ico">
    <meta name="description" content="Note JS -- JS学习之路">
    
    <link rel="preload" href="/noteJS/assets/css/0.styles.0d031968.css" as="style"><link rel="preload" href="/noteJS/assets/js/app.de2a3deb.js" as="script"><link rel="preload" href="/noteJS/assets/js/2.2934c4fe.js" as="script"><link rel="preload" href="/noteJS/assets/js/51.9a095aae.js" as="script"><link rel="prefetch" href="/noteJS/assets/js/10.8e524a1e.js"><link rel="prefetch" href="/noteJS/assets/js/11.dcb84f9a.js"><link rel="prefetch" href="/noteJS/assets/js/12.4de8778d.js"><link rel="prefetch" href="/noteJS/assets/js/13.bd9bcf2d.js"><link rel="prefetch" href="/noteJS/assets/js/14.50ed1385.js"><link rel="prefetch" href="/noteJS/assets/js/15.0ed8ba18.js"><link rel="prefetch" href="/noteJS/assets/js/16.2e910ce8.js"><link rel="prefetch" href="/noteJS/assets/js/17.21aed239.js"><link rel="prefetch" href="/noteJS/assets/js/18.84744a74.js"><link rel="prefetch" href="/noteJS/assets/js/19.0fc2c486.js"><link rel="prefetch" href="/noteJS/assets/js/20.c370a068.js"><link rel="prefetch" href="/noteJS/assets/js/21.5d2a08f1.js"><link rel="prefetch" href="/noteJS/assets/js/22.42ea0523.js"><link rel="prefetch" href="/noteJS/assets/js/23.813f6b30.js"><link rel="prefetch" href="/noteJS/assets/js/24.c30b9b88.js"><link rel="prefetch" href="/noteJS/assets/js/25.a5ecffdb.js"><link rel="prefetch" href="/noteJS/assets/js/26.0754764b.js"><link rel="prefetch" href="/noteJS/assets/js/27.9e4f2b8a.js"><link rel="prefetch" href="/noteJS/assets/js/28.0a022191.js"><link rel="prefetch" href="/noteJS/assets/js/29.5e83a8fa.js"><link rel="prefetch" href="/noteJS/assets/js/3.c617dfcf.js"><link rel="prefetch" href="/noteJS/assets/js/30.8cd70775.js"><link rel="prefetch" href="/noteJS/assets/js/31.5718a351.js"><link rel="prefetch" href="/noteJS/assets/js/32.2058391d.js"><link rel="prefetch" href="/noteJS/assets/js/33.c6bc4ee0.js"><link rel="prefetch" href="/noteJS/assets/js/34.a40b12e8.js"><link rel="prefetch" href="/noteJS/assets/js/35.3fd41c8e.js"><link rel="prefetch" href="/noteJS/assets/js/36.df089351.js"><link rel="prefetch" href="/noteJS/assets/js/37.055e5992.js"><link rel="prefetch" href="/noteJS/assets/js/38.00fe710c.js"><link rel="prefetch" href="/noteJS/assets/js/39.f9fc11b3.js"><link rel="prefetch" href="/noteJS/assets/js/4.9fe58479.js"><link rel="prefetch" href="/noteJS/assets/js/40.88f25272.js"><link rel="prefetch" href="/noteJS/assets/js/41.1ab5d532.js"><link rel="prefetch" href="/noteJS/assets/js/42.0ab644db.js"><link rel="prefetch" href="/noteJS/assets/js/43.c1a5d84d.js"><link rel="prefetch" href="/noteJS/assets/js/44.98073da6.js"><link rel="prefetch" href="/noteJS/assets/js/45.48734a8e.js"><link rel="prefetch" href="/noteJS/assets/js/46.19ba576c.js"><link rel="prefetch" href="/noteJS/assets/js/47.c4de71d3.js"><link rel="prefetch" href="/noteJS/assets/js/48.ebf2c63a.js"><link rel="prefetch" href="/noteJS/assets/js/49.27fd8d82.js"><link rel="prefetch" href="/noteJS/assets/js/5.8d2e2d22.js"><link rel="prefetch" href="/noteJS/assets/js/50.940cdb48.js"><link rel="prefetch" href="/noteJS/assets/js/52.c6b81ec4.js"><link rel="prefetch" href="/noteJS/assets/js/53.d7c0279b.js"><link rel="prefetch" href="/noteJS/assets/js/54.23d1abad.js"><link rel="prefetch" href="/noteJS/assets/js/55.92fa5778.js"><link rel="prefetch" href="/noteJS/assets/js/56.1ace6869.js"><link rel="prefetch" href="/noteJS/assets/js/57.bb182db6.js"><link rel="prefetch" href="/noteJS/assets/js/58.a08f9bf6.js"><link rel="prefetch" href="/noteJS/assets/js/59.e6fc9ea1.js"><link rel="prefetch" href="/noteJS/assets/js/6.b8bffdec.js"><link rel="prefetch" href="/noteJS/assets/js/60.a0b8004d.js"><link rel="prefetch" href="/noteJS/assets/js/61.dff6eb29.js"><link rel="prefetch" href="/noteJS/assets/js/62.49688772.js"><link rel="prefetch" href="/noteJS/assets/js/63.426e5dee.js"><link rel="prefetch" href="/noteJS/assets/js/64.ace960d7.js"><link rel="prefetch" href="/noteJS/assets/js/65.c2fc6a89.js"><link rel="prefetch" href="/noteJS/assets/js/66.8e2447bd.js"><link rel="prefetch" href="/noteJS/assets/js/67.ed8d7d55.js"><link rel="prefetch" href="/noteJS/assets/js/68.ba7edcf0.js"><link rel="prefetch" href="/noteJS/assets/js/69.0f07e049.js"><link rel="prefetch" href="/noteJS/assets/js/7.4d0320f7.js"><link rel="prefetch" href="/noteJS/assets/js/8.9d5f9767.js"><link rel="prefetch" href="/noteJS/assets/js/9.1818743a.js">
    <link rel="stylesheet" href="/noteJS/assets/css/0.styles.0d031968.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/noteJS/" class="home-link router-link-active"><img src="/noteJS/assets/img/logo.jpg" alt=" " class="logo"> <span class="site-name can-hide"> </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/superwtt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/superwtt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteJS/introduction/introduction.html" class="sidebar-link">简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>概念篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>react</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-3"><a href="/noteJS/react/概念/react相关/面试题集锦/react1.html" class="sidebar-heading clickable open active"><span>面试题集锦</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteJS/react/概念/react相关/面试题集锦/react1.html" class="active sidebar-link">react1</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/noteJS/react/概念/react相关/面试题集锦/react2.html" class="sidebar-link">react2</a></li></ul></section></li><li><a href="/noteJS/react/概念/react相关/super的作用.html" class="sidebar-link">super的作用</a></li><li><a href="/noteJS/react/概念/react相关/React的事件机制.html" class="sidebar-link">React的事件机制</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Hooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Redux</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>原理篇</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteJS/vue/概念/路由.html" class="sidebar-link">路由</a></li><li><a href="/noteJS/vue/概念/面试题集锦/vue1.html" class="sidebar-link">面试题集锦</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/noteJS/vue/原理/Vue的响应式原理.html" class="sidebar-heading clickable"><span>原理</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>General</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteJS/general/前端如何更好的实现接口的缓存与更新.html" class="sidebar-link">前端如何更好的实现接口的缓存与更新</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="声明式编程和命令式编程"><a href="#声明式编程和命令式编程" class="header-anchor">#</a> 声明式编程和命令式编程</h3> <h4 id="区别"><a href="#区别" class="header-anchor">#</a> 区别：</h4> <ol><li>声明式编程：声明式编程是一种编程范式，它关注的是你要做什么，而不是如何做。它表达逻辑而不是定义步骤。</li> <li>命令式编程：描述了如何去做</li></ol> <h4 id="代码示例"><a href="#代码示例" class="header-anchor">#</a> 代码示例：</h4> <p>将数组的每个元素乘以2，使用声明式map函数，让编译器来完成其余的工作，而使用命令式，需要编写所有的流程步骤</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 声明式</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 命令式</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>numbers<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> num <span class="token operator">=</span> numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
   newArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="什么是react"><a href="#什么是react" class="header-anchor">#</a> 什么是React</h3> <ol><li>React是一个用于构建用户界面的javascript库。</li> <li>使用虚拟DOM来有效的操作DOM</li> <li>遵循从高阶组件到低阶组件的单向数据流</li></ol> <hr> <h3 id="构建react项目的几种方式"><a href="#构建react项目的几种方式" class="header-anchor">#</a> 构建React项目的几种方式</h3> <ol><li>浏览器通过标签直接引入</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 引入react</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/react@16/umd/react.development.js&quot;</span> crossorigin<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 引入react-dom</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/react-dom@16/umd/react-dom.deelopment.js&quot;</span> crossorigin<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 引入Babel,使浏览器可以识别JSX语法，如果不使用JSX语法，可以不引入</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ol start="2"><li>使用官方脚手架<code>create-react-app</code></li> <li>使用<code>webpack</code>、<code>babel</code>、<code>react</code>自己动手搭建</li></ol> <hr> <h3 id="this-setstate是同步还是异步的"><a href="#this-setstate是同步还是异步的" class="header-anchor">#</a> this.setState是同步还是异步的</h3> <p>回答这个问题分为三个层次：</p> <ol><li>通过<code>ReactDOM.render(&lt;App/&gt;,rootNode)</code>创建的应用统称为<code>legacy</code>模式</li> <li>legacy模式下，<code>this.setState</code>是异步的，但是也是可以跳出异步的限制，变成同步更新的</li></ol> <ul><li><p>为什么是异步的：</p> <ul><li>基于React源码中的性能优化特性<code>batchedUpdates</code>：多次<code>setState</code>会被合并成一个，并且是异步执行</li> <li>当我们触发了多个<code>this.setState</code>，React只会将多次触发合并成一次，减少性能的开销。如果一次<code>setState</code>就触发一个完整的更新流程触发一次re-render，那么页面没几次就卡死了</li> <li><code>batchedUpdates</code>方法，会将一个全局变量打上批处理的标签，进来先锁上，将这个变量变成true，表示：当前正处于批量更新中。当被“锁上”时，任何需要更新的组件只能暂时进入<code>dirtyComponent</code>队列中等待更新</li></ul></li> <li><p>如何跳出异步的限制：</p> <ul><li><code>this.setState</code>之所以是异步并且批量更新的，是因为React进来就把全局变量锁住，默认就是异步且批量更新的。是否命中<code>batchedUpdates</code>，是靠全局变量<code>executionContext</code>锁住的；</li> <li>当执行完回调之后，React又会将这个变量重置，所以我们只要在React释放这个变量的时候，执行<code>this.setState</code>就不会就不会命中<code>batchedUpdates</code>，变成同步执行</li> <li>将<code>this.setState</code>放到<code>setTimeout</code>中变成异步执行，由于fn回调执行完，会重置<code>executionContext</code>，那么等这个<code>setState</code>执行的时候，全局上下文已经不存在那个flag了，就不会命中<code>batchedUpdates</code></li></ul></li></ul> <ol start="3"><li>setState的缺点就是：不能立即拿到更新之后的值</li></ol> <hr> <h3 id="react和vue有什么优缺点"><a href="#react和vue有什么优缺点" class="header-anchor">#</a> React和Vue有什么优缺点</h3> <h4 id="区别-2"><a href="#区别-2" class="header-anchor">#</a> 区别</h4> <ol><li>生成方式</li></ol> <ul><li>React的思路是All in JavaScript，通过JavaScript生成HTML、通过JavaScript操作CSS</li> <li>Vue是把HTML、CSS、JavaScript组合到一起，有自己单独的文件和模板引擎</li></ul> <ol start="2"><li>数据</li></ol> <ul><li>React中是单向数据流，结合imutable来实现数据的不可随意改变（指的是视图上修改数据不会自动更新到实例的state里，而是要绑定事件）</li> <li>Vue可以实现双向绑定，实例中的data与渲染的DOM保持一致，无论谁被改变，另一方都会响应地更新数据</li></ul> <ol start="3"><li>学习曲线</li></ol> <ul><li>React学习曲线比较曲折，适合大型项目</li> <li>Vue比较好上手，语法简洁，体积小，适合小中型项目</li></ul> <hr> <h4 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h4> <ol><li>都有前端的现金概念：组件化思想、虚拟DOM、生命周期等等</li> <li>都比较灵活，比传统的JQ更好使用</li> <li>文档和社区都比较丰富，有专人在不停地维护</li></ol> <hr> <h3 id="什么是virtual-dom及其工作原理"><a href="#什么是virtual-dom及其工作原理" class="header-anchor">#</a> 什么是Virtual DOM及其工作原理</h3> <ol><li>概念</li></ol> <ul><li>Virtual DOM是一个轻量级的JavaScript对象，将元素、属性、内容作为对象及其属性，经过循环生成节点树</li></ul> <ol start="2"><li>工作原理</li></ol> <ul><li>当用户触发更新时，会生成一个新的VDOM树</li> <li>计算新旧VDOM树之间的差异</li> <li>将差异更新到页面上</li></ul> <hr> <h3 id="为什么浏览器无法读取jsx"><a href="#为什么浏览器无法读取jsx" class="header-anchor">#</a> 为什么浏览器无法读取JSX</h3> <ol><li>浏览器只能处理JavaScript对象，而无法直接读取JSX。</li> <li>为了让浏览器能够读取JSX，需要babel这样的JSX转换器将JSX文件转换成JavaScript对象，然后将其传给浏览器</li></ol> <hr> <h3 id="你是怎么理解-react中一切皆组件这句话"><a href="#你是怎么理解-react中一切皆组件这句话" class="header-anchor">#</a> 你是怎么理解，React中一切皆组件这句话</h3> <p>React的核心思想是声明式渲染和组件化开发</p> <p>组件是React应用的基本构建模块，这些组件将整个应用分割成小的、独立、并且可以重用的部分。</p> <p>React中有很多组件的概念：容器组件、展示（UI）组件、无状态组件、有状态组件、函数组件、高阶组件等等</p> <ul><li>容器组件：容器组件中实现一些具体的逻辑，引入UI组件作为其子组件，将子组件需要的数据通过组件间传值的方式传递到UI组件，进行数据的渲染</li> <li>展示组件：控制组件的展示，没有逻辑的耦合</li> <li>无状态组件：不涉及状态的更新，基本组成结构就是属性props加上一个渲染函数render。由于没有状态的影响，所以就是纯静态展示的作用，例如UI库中的按钮、输入框、图标等等</li> <li>有状态组件：组件内部包含state状态，并且会随着事件或者外部的触发而发生改变。有状态组件通常带有生命周期，用来在不同的时刻触发状态的更新，在写业务逻辑时常常会用到，不同的场景所用的状态和生命周期也不相同</li> <li>函数组件：使用函数编程的方式返回React元素，没有生命周期和状态state，用hooks模拟生命周期的执行</li> <li>高阶组件：用来给基础组件增加功能，减少公共的代码，如打印日志、获取数据、校验数据时，常常会抽象出一个高阶组件，减少代码的重复。</li> <li>受控组件：受控组件这个概念一般用于表单，区别受控组件和非受控组件很贱，就是是否用react来管理表单的值。在表单中，通常维护自己的一套state，并随着用户的输入自己进行UI上的更新。如果将React中的state属性和表单元素的值建立依赖，再通过onChange事件与setState更新state的属性，就能达到控制用户输入过程中表单发生的操作，被React以这种方式取值的表单元素就叫做受控组件</li> <li>非受控组件：我们仅仅想要获取某个表单元素的值，而不关心它是如何改变的，获取数据就相当于操作DOM，比如点击一个按钮，我们通过ref获取到DOM元素，再获取该元素的value值，这就不需要我们单独的维护一个状态，对于这种场景我们就称为非受控组件</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.0 展示组件和容器组件在一起，这个组件是没法复用的，因为数据的请求和数据的展示都在一个组件内进行，要实现组件的复用，我们就需要将展示组件和容器组件分离出来</span>
<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
         todos<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/todos'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                todos<span class="token operator">:</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>todos<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                      <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.0 拆分展示组件</span>
<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">const</span> <span class="token punctuation">{</span>todos<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                 <span class="token punctuation">{</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                     <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
             <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token comment">// 2.1 拆分容器组件  </span>
<span class="token keyword">class</span> <span class="token class-name">TodoListContainer</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            todos<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fetchData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/todos'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                todos<span class="token operator">:</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TodoList todos<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>    
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 简单的高阶组件示例</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">WrapperedComponent</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component<span class="token punctuation">{</span>
     <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
             count<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 定义可复用状态</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'111'</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
     <span class="token comment">// 定义可复用方法</span>
     <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token parameter">mobile</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span>mobile<span class="token punctuation">}</span><span class="token punctuation">)</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
     <span class="token function">postVcode</span><span class="token punctuation">(</span><span class="token parameter">mobile</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token comment">//...</span>
     <span class="token punctuation">}</span>
     <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">return</span><span class="token punctuation">(</span>
             <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
               <span class="token operator">&lt;</span>WrapperedComponent getCode<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>getCode<span class="token punctuation">}</span> state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
         <span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 传入高阶组件</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">HOC</span> <span class="token keyword">from</span> <span class="token string">&quot;./index&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Register</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token string">'126823345'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>使用高阶组件里复用的方法<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
           <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  
      <span class="token punctuation">)</span> 
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">HOC</span><span class="token punctuation">(</span>Register<span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="react自定义组件你写过吗-说说看都写过哪些"><a href="#react自定义组件你写过吗-说说看都写过哪些" class="header-anchor">#</a> React自定义组件你写过吗？说说看都写过哪些</h3> <h4 id="一般写过两种"><a href="#一般写过两种" class="header-anchor">#</a> 一般写过两种：</h4> <ul><li>类组件</li> <li>函数组件</li></ul> <h4 id="根据用途又分为"><a href="#根据用途又分为" class="header-anchor">#</a> 根据用途又分为：</h4> <ul><li>无状态组件</li> <li>有状态组件</li> <li>容器组件</li> <li>UI组件</li> <li>高阶组件</li> <li>等等</li></ul> <hr> <h3 id="react中函数式组件和类组件的区别"><a href="#react中函数式组件和类组件的区别" class="header-anchor">#</a> React中函数式组件和类组件的区别</h3> <ol><li>语法上</li></ol> <ul><li>函数组件可以看成一个纯函数，接收一个props并返回React元素</li> <li>类组件需要去继承<code>React.Component</code>并且创建<code>render</code>返回React元素，这会需要更多的代码</li></ul> <ol start="2"><li>状态管理</li></ol> <ul><li>函数组件不能使用<code>setState</code>，这也是为什么把函数组件称为无状态组件的原因</li> <li>类组件可以使用<code>setState</code>管理内部状态</li></ul> <ol start="3"><li>生命周期钩子</li></ol> <ul><li>函数组件没有生命周期，只有hooks函数模拟生命周期的执行。函数组件本身是没有状态的，它的state是一种外部数据，用来维护内部的状态</li> <li>类组件的所有生命周期钩子都来自于继承的<code>React.Component</code>中</li></ul> <ol start="4"><li>调用方式</li></ol> <ul><li>如果<code>SayHi</code>是一个函数组件，React需要调用它：<code>const result = SayHi()</code>即可</li> <li>如果<code>SayHi</code>是一个类组件，React需要先用new操作符实例化，然后调用render方法</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 函数组件</span>
<span class="token keyword">function</span> <span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello React<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  &lt;p&gt;Hello React&lt;/p&gt; </span>

<span class="token comment">// 类组件</span>
<span class="token keyword">class</span> <span class="token class-name">SayHi</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> 
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> React<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
<span class="token keyword">const</span> sh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sh<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p&gt;Hello, React&lt;/p&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// MyComp看起来好像有状态，不是纯函数</span>
<span class="token keyword">function</span> <span class="token function">MyComp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span>setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 相当于</span>
<span class="token keyword">function</span> <span class="token function">MyComp</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>state<span class="token punctuation">,</span>setState<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// React内核生成“虚拟组件”，帮你维护组件状态</span>
<span class="token keyword">function</span> <span class="token function">MyCompoWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span>setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>MyComp state<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span> setState<span class="token operator">=</span><span class="token punctuation">{</span>setState<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// useState得到的状态，对于组件来说是一种外部传入的数据，和props、context本质上没有区别</span>
<span class="token comment">// useState声明的状态，实际由React内核来维护，注入给函数组件，hooks时代的函数式组件依然是外部数据-&gt;view的纯函数</span>
</code></pre></div><hr> <h3 id="react中render-的目的"><a href="#react中render-的目的" class="header-anchor">#</a> React中render()的目的</h3> <ol><li>一个class组件必须要实现一个render方法，否则会报错<code>TypeError：instance.render is not a function</code></li> <li>render方法返回一个JSX元素，根据渲染原理将JSX渲染成真实的DOM映射到页面上</li></ol> <hr> <h3 id="react中的state和props"><a href="#react中的state和props" class="header-anchor">#</a> React中的state和props</h3> <ol><li>state是数据的来源，保存着该组件当前的数据状态，任何UI的改变，都可以从state的变化中反映出来</li> <li>props是属性，一般用作父组件向子组件传值，是只读的，可以设置默认类型和默认值</li></ol> <hr> <h3 id="uselayouteffect和useeffect的区别"><a href="#uselayouteffect和useeffect的区别" class="header-anchor">#</a> useLayoutEffect和useEffect的区别</h3> <ol><li>源码</li></ol> <hr> <h3 id="purecomponent和component的区别"><a href="#purecomponent和component的区别" class="header-anchor">#</a> PureComponent和Component的区别</h3> <ol><li>区别：
<code>PureComponent</code>和<code>Component</code>唯一的差别就是：<code>PureComponent</code>帮我们做了<code>shouldComponentUpdate</code>的判断。而<code>Component</code>除非手写<code>shouldComponentUpdate</code>，否则一律返回true</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">shallowEqual</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span>nextProps<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">shallowEqual</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 浅比较是否相等</span>
<span class="token keyword">function</span> <span class="token function">shallowEqual</span><span class="token punctuation">(</span><span class="token parameter">objA<span class="token punctuation">,</span> objB</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>objA<span class="token punctuation">,</span> objB<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// Object.is相当于===</span>
     <span class="token keyword">return</span> <span class="token boolean">true</span> 
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>
      <span class="token keyword">typeof</span> objA <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span>
      objA <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span>
      <span class="token keyword">typeof</span> objB <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span>
      objB <span class="token operator">===</span> <span class="token keyword">null</span> 
  <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> keysA <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objA<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> keysB <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objB<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>keysA<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>
      <span class="token operator">!</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>objB<span class="token punctuation">,</span> keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token operator">!</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> objB<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>当新的props即nextProps或者新的state即nextState与当前的值相比较没有发生变化时，组件不用更新;只有检测到state或者props发送变化的时候，才会重新调用render方法</li> <li>这里用了shallowEqual，只比较object的第一层key,value，因为进行deepEqual的对比是非常消耗性能的</li></ul> <ol start="2"><li>使用场景
<code>PureComponent</code>如果能够正确使用，那么可以代替一些<code>Component</code>的使用场景。那么如何正确使用呢？</li></ol> <ul><li>引用类型的数据，如果需要更新这个数据，那么必须重新创建一个再给这个数据赋值，这样始终保证props和state都是新的对象，这样浅比较就不会出错了</li></ul> <ol start="3"><li>优缺点</li></ol> <ul><li><p>优点：</p> <ul><li><code>PureComponent</code> 不需要使用<code>shouldComponentUpdate</code>就可以使用简单的判断来提升性能，减少了不必要的render，不需要手写<code>shouldComponentUpdate</code>，节省了代码量</li></ul></li> <li><p>缺点：</p> <ul><li><code>PureComponent</code> 由于进行的是浅层比较，可能会由于深层数据的不一致而导致产生错误的判断，从而使得界面不更新；对于引用类型比较的只是内存的地址</li> <li>一个对象指向同一个地址会导致<code>PureComponent</code>不更新，相反地，每次都传入一个新对象就会导致<code>PureComponent</code>每次执行render，这样就跟<code>Component</code>没有区别了。<div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>list<span class="token operator">:</span><span class="token punctuation">{</span>title<span class="token operator">:</span><span class="token string">'react line1'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>list<span class="token operator">:</span><span class="token punctuation">{</span>title<span class="token operator">:</span><span class="token string">'react line1'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
 a <span class="token operator">!==</span> b
</code></pre></div></li> <li><code>Component</code> 除非手写<code>shouldComponentUpdate</code>，否则一律返回true，也就是即使props和state没有改变，也会进行一遍re-render</li></ul></li></ul> <ol start="4"><li><code>PureComponent</code>是不是任何情况下都比<code>Component</code>性能好？</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">{</span> item <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token operator">&lt;</span>Post item<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">'width'</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> 
<span class="token punctuation">}</span>
</code></pre></div><ul><li>由于每次传入style都是一个新对象，所以我们可以预知这个组件每次都是需要renderer的。此时<code>PureComPonent</code>每次都要执行一次shadowEqual的对比，反而比 <code>Component</code>更耗性能</li></ul> <ol start="5"><li>结论</li></ol> <p><font style="color:blue;">如果你已经预知到某个组件的props或者state会频繁变动，那根本就不用使用PureComponent</font></p> <ol start="6"><li>参考链接</li></ol> <p><a href="https://segmentfault.com/a/1190000018641319" target="_blank" rel="noopener noreferrer">segmentfault<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr> <h3 id="说说你喜欢react的原因是什么-它有什么优缺点"><a href="#说说你喜欢react的原因是什么-它有什么优缺点" class="header-anchor">#</a> 说说你喜欢React的原因是什么？它有什么优缺点？</h3> <ul><li>喜欢的原因：React更加具有函数式编程的特点，代码更加规范化、组件化</li> <li>优点：函数式编程，代码规范、组件化、跨浏览器表现都很好</li> <li>缺点：只是一个UI框架，数据的管理、路由等 都需要额外的插件支持</li></ul> <hr> <h3 id="react中发起网络请求应该在哪个生命周期"><a href="#react中发起网络请求应该在哪个生命周期" class="header-anchor">#</a> React中发起网络请求应该在哪个生命周期</h3> <ol><li><code>constructor</code></li> <li><code>componentWillMount</code></li> <li><code>componentDidMount</code>，这个时候已经渲染完成，更新数据不会发生渲染冲突</li></ol> <hr> <h3 id="jsx语法和html有什么不同"><a href="#jsx语法和html有什么不同" class="header-anchor">#</a> JSX语法和HTML有什么不同</h3> <ol><li>类名</li> <li>模板</li> <li>内嵌样式</li> <li>事件绑定</li> <li>列表</li></ol> <hr> <h3 id="react如何提高列表的渲染性能"><a href="#react如何提高列表的渲染性能" class="header-anchor">#</a> React如何提高列表的渲染性能</h3> <ol><li>给列表设置key，避免使用index作为key</li> <li>懒加载</li> <li>仅加载可视区域数据</li></ol> <hr> <h3 id="为什么建议setstate的第一个参数是一个回调而不是一个对象呢"><a href="#为什么建议setstate的第一个参数是一个回调而不是一个对象呢" class="header-anchor">#</a> 为什么建议setState的第一个参数是一个回调而不是一个对象呢</h3> <p>因为this.state和this.props的更新可能是异步的，不能依赖它们去计算下一个state。而回调函数中可以传两个参数prevState和props，能够获取到state更新之前的值和应用更新时的props值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="请你描述下对纯函数的理解"><a href="#请你描述下对纯函数的理解" class="header-anchor">#</a> 请你描述下对纯函数的理解</h3> <h4 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h4> <p>所谓的纯函数，即固定的输入有固定的输出，没有额外的依赖，并且没有任何副作用</p> <hr> <h4 id="副作用"><a href="#副作用" class="header-anchor">#</a> 副作用</h4> <p>函数的副作用是指在正常工作任务之外对外部环境所施加的影响。比如对外部函数的读写操作、调用DOM Api、发送ajax请求、调用window.load刷新浏览器</p> <hr> <h4 id="为什么需要纯函数"><a href="#为什么需要纯函数" class="header-anchor">#</a> 为什么需要纯函数</h4> <p>纯函数非常靠谱，不用担心它会干其他什么事情产生不可预料的结果，也不会对外部产生影响。</p> <p>React中reducer对state的管控就采用了纯函数的思想，践行了React单一数据流的思想理念</p> <hr> <h3 id="如何提高react应用的性能"><a href="#如何提高react应用的性能" class="header-anchor">#</a> 如何提高React应用的性能</h3> <ul><li>适当地使用<code>PureComponent</code>或者<code>shouldComponentUpdate</code>生命周期方法，它避免了不必要的渲染</li> <li>使用React.memo缓存组件，只有当传入组件的状态值发生变化时才会重新渲染，如果传入相同的值，则缓存组件</li> <li>使用useMemo缓存大量的计算，只有传入的参数发生变化 函数才会重新计算新的结果，如果你的组件是功能性组件，重新渲染会导致每次都调用大型的计算函数，这是非常耗性能的</li> <li>延迟加载不是立即需要的组件，React.lazy()</li> <li>使用React.Fragment避免添加额外的DOM</li></ul> <hr> <h3 id="为什么不建议将key作为index"><a href="#为什么不建议将key作为index" class="header-anchor">#</a> 为什么不建议将key作为index</h3> <p>不建议index作为key，如果内容只是作为纯展示，而不涉及到数组的动态变更，是可以使用的。</p> <ul><li>当数组顺序发生改变之后，key对应的实例都没有被销毁而是重新更新。比如key=0.发现只有文字更新了，而input没有更新，所以input不会变化</li> <li>索引作为key，当数组中删除时，虽然对应的组件删除了，但是对应的索引会被自动替代，比如3个组件，删除第2个，真正想要的是[1,3]，但是展示的可能是[1,2]</li></ul> <p><img src="https://raw.githubusercontent.com/superwtt/MyFileRepository/main/image/React/%E6%94%B9%E5%8F%98%E9%A1%BA%E5%BA%8F%E5%89%8D.png" alt=""> <img src="https://raw.githubusercontent.com/superwtt/MyFileRepository/main/image/React/%E6%94%B9%E5%8F%98%E9%A1%BA%E5%BA%8F%E5%90%8E.png" alt=""></p> <hr> <h3 id="react中怎么改变组件的状态-以及改变的过程是什么"><a href="#react中怎么改变组件的状态-以及改变的过程是什么" class="header-anchor">#</a> React中怎么改变组件的状态？以及改变的过程是什么？</h3> <h4 id="从生命周期的角度"><a href="#从生命周期的角度" class="header-anchor">#</a> 从生命周期的角度</h4> <p>如果是已经挂载的组件，props传进来之后：</p> <ul><li>先调用<code>componentWillReceiveProps</code></li> <li>然后继续调用<code>shouldComponentUpdate</code></li> <li>若<code>shouldComponentUpdate</code>返回true，则继续调用<code>componentWillUpdate</code>计算<code>nextState</code></li> <li>然后render，最后调用<code>componentDidUpdate</code>完成整个过程</li></ul> <h4 id="从redux的角度"><a href="#从redux的角度" class="header-anchor">#</a> 从redux的角度</h4> <ul><li>用户触发<code>action</code></li> <li><code>dispatch action</code> 到<code>store</code>中</li> <li>通过<code>reducer</code>改变<code>state</code></li> <li><code>store</code>再将新的<code>state</code>发布给组件</li></ul> <hr> <h3 id="react是如何处理表单输入的"><a href="#react是如何处理表单输入的" class="header-anchor">#</a> React是如何处理表单输入的</h3> <p>先把输入的值存在组件的state中，之后通过状态的改变而更新页面的内容，从而显示正确的值，用户提交的也是从state里获取的表单的value</p> <hr> <h3 id="请你说说对fiber架构的理解"><a href="#请你说说对fiber架构的理解" class="header-anchor">#</a> 请你说说对Fiber架构的理解</h3> <p>1.在React15.0版本中，React协调器的更新是同步的，这就会带来一个问题，当页面需要渲染比较多的DOM元素时，就会出现卡顿，称为<code>stack Reconciler</code>
2.React16.0改进了这个缺点：将更新分优先级层次，用异步的更新代替了同步的更新。React16的协调器是基于Fiber架构实现的，所以被称为<code>Fiber Reconciler</code>。</p> <p><code>Fiber</code>保存了组件对应的类型、dom节点、更新状态、需要执行的副作用等信息，JSX中的每一个节点都被称为fiber节点，从而形成一个fiber树，React16的协调器是基于Fiber节点实现的，所以又被称为<code>Fiber Reconciler</code></p> <hr> <h3 id="react中setstate和replacestate的区别是什么"><a href="#react中setstate和replacestate的区别是什么" class="header-anchor">#</a> React中setState和replaceState的区别是什么？</h3> <ol><li>setState是更新状态</li> <li>replaceState是替换状态</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token number">2</span> <span class="token punctuation">}</span>

<span class="token comment">//setState({c:3})之后</span>
state <span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>c<span class="token operator">:</span><span class="token number">3</span> <span class="token punctuation">}</span>

<span class="token comment">// replaceState之后</span>
state <span class="token punctuation">{</span> c<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="react中的状态提升是什么"><a href="#react中的状态提升是什么" class="header-anchor">#</a> React中的状态提升是什么</h3> <ol><li><p>当我们遇到几个组件需要共用状态数据的情况下，最好将这部分共享的状态提升至他们最近的父组件当中进行管理</p></li> <li><p>比如input表单，<code>onchange</code>时，调用父组件传递过来的方法，将值作为回调传递给父组件，父组件改变state之后再通过props传递给子组件，这就实现了一个状态提升的流程</p></li></ol> <hr> <h3 id="请你描述下你对react新特性hooks的理解-她又哪些可以应用的场景"><a href="#请你描述下你对react新特性hooks的理解-她又哪些可以应用的场景" class="header-anchor">#</a> 请你描述下你对React新特性hooks的理解，她又哪些可以应用的场景？</h3> <p>React有两种自定义组件：类组件和函数组件</p> <p>类组件提供各种各样的生命周期函数，让我们有能力去操作React渲染过程中的各个阶段，实现业务逻辑</p> <p>函数组件无法使用生命周期函数，新增了hooks特性模拟生命周期的行为，让我们能够以更加编程式的方式构建应用</p> <p>hooks的应用场景：</p> <ul><li>修改数据状态：setState</li> <li>执行DOM挂载或更新之后的事务：useEffect</li> <li>共享数据，跨组件传值：useContext</li> <li>复杂的状态管理：useReducer</li></ul> <hr> <h3 id="react中绑定this的方式"><a href="#react中绑定this的方式" class="header-anchor">#</a> React中绑定this的方式</h3> <ol><li>构造函数<code>constructor</code>中利用bind绑定</li> <li>函数定义的时候使用箭头函数</li></ol> <hr> <h3 id="react是如何阻止事件冒泡的"><a href="#react是如何阻止事件冒泡的" class="header-anchor">#</a> React是如何阻止事件冒泡的</h3> <ol><li><code>e.stopPropagation()</code>：阻止合成事件之间的冒泡</li> <li><code>e.nativeEvent.stopImmediatePropagation()</code>：阻止合成事件往最外层document上的事件之间的冒泡</li> <li><code>e.target.value</code>：阻止合成事件，通过判断<code>e.target</code>来判断要不要阻止document上事件的冒泡</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 阻止原生事件之间的冒泡</span>
<span class="token keyword">class</span> <span class="token class-name">Bubble</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">testClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">&quot;test&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">testClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a ref<span class="token operator">=</span><span class="token string">&quot;update&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          更新
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 阻止合成事件与最外层document上的事件之间的冒泡</span>
<span class="token keyword">class</span> <span class="token class-name">Bubble</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;document&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    e<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a ref<span class="token operator">=</span><span class="token string">&quot;update&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          更新
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 阻止合成事件与除最外层document上的原生事件之间的冒泡</span>
<span class="token keyword">class</span> <span class="token class-name">Bubble</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token comment">// 通过e.target来判断要不要阻止document上事件的冒泡</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;document&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻止与testClick之间的冒泡</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a ref<span class="token operator">=</span><span class="token string">&quot;update&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          更新
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/noteJS/introduction/introduction.html" class="prev">
        简介
      </a></span> <span class="next"><a href="/noteJS/react/概念/react相关/面试题集锦/react2.html">
        react2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/noteJS/assets/js/app.de2a3deb.js" defer></script><script src="/noteJS/assets/js/2.2934c4fe.js" defer></script><script src="/noteJS/assets/js/51.9a095aae.js" defer></script>
  </body>
</html>
