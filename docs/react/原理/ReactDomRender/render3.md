### 背景

上面两篇文章分别对应了首次渲染root不存在和第二次渲染root存在的两种情况。

初始化root之后，创建更新推入到更新队列中

然后进入调度流程，本篇讲的就是调度流程

---

### 为什么需要调度

1. 大家都知道JS引擎和渲染引擎是一个互斥的关系，如果js在执行代码，那么渲染引擎工作就会被停止。如果我们有一个很复杂的复合组件需要重新渲染，那么调用栈很可能会很长。
如果中间进行了复杂的操作，就可能导致长时间阻塞渲染引擎带来不好的用户体验，调度就是用来解决这个问题的。


2. React会根据任务的优先级去分配各自的`expirationTime`，在过期时间到来之前先去处理更高优先级的任务，并且高优先级的任务可以打断低优先级的任务，（因此会造成某些生命周期函数多次被执行），
从而实现在不影响用户体验的情况下去分段计算更新，也就是时间分片

---

### React如何实现调度













































https://yuchengkai.cn/react/2019-06-04.html#%E6%96%87%E7%AB%A0%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99

https://zhuanlan.zhihu.com/p/103506207



