### React中的生命周期有哪些
1. 定义：生命周期是指在某一时刻，组件会自动调用执行的函数
2. 组件的执行时期：
+ 挂载阶段mount：只有组件在第一次被挂载在页面的时候执行
  + `constructor`：初始化state对象，给自定义方法绑定this
  + ~~`componentWillMount`~~：组件即将被挂载到页面的时候执行，在`render`之前，还没有挂载DOM
  + `componentDidMount`：组件被挂载到页面之后执行，在`render`之后，已经挂载DOM

+ 更新阶段update：组件更新的时候执行
  + `shouldComponentUpdate`：组件更新之前执行，需要返回true/false，返回true表示需要更新组件，返回false表示不需要更新组件
  + ~~`componentWillUpdate`~~：组件更新之前执行，在`shouldComponentUpdate`之后执行，且`shouldComponentUpdate`返回true才执行，否则不执行
  + `render`
  + `getSnapshotBeforeUpdate`：在render之后，componentDidUpdate之前调用
  + `componentDidUpdate`：组件更新完成之后执行
  + ~~`componentWillReceiveProps`~~：当一个组件从父组件接收了参数，只要这个父组件的render函数被重新执行了，这个生命周期才执行


+ 卸载阶段unmount
  + `componentWillUnmount`：当这个组件即将从页面中剔除的时候执行

![](https://raw.githubusercontent.com/superwtt/MyFileRepository/main/image/React/生命周期.png)

---

### 执行次数
1. 只执行一次：`constructor`、`componentWillMount`、`componentDidMount`
2. 执行多次：`render`、子组件的`componentWillReceiveProps`、`componentWillUpdate`、`componentDidUpdate`
3. 有条件的执行：`componentWillUmmount`组件离开时才执行
4. 不执行的：根组件的`componentWillReceiveProps`，因为根组件没有父组件传值给根组件了

---

### 源码解析

```


---

### 废弃的以及新增的生命周期
1.废弃的
+ `componentWillMount`
+ `componentWillReceiveProps`
+ `componentWillUpdate`


2.新增的
+ `static getDerivedStateFromProps`：当我们接收到新的属性想去修改我们的state，可以在这个生命周期中完成
+ `getSnapshotBeforeUpdate`

---

### 异步渲染的两个阶段
1.`Reconciliation阶段`
+ `componentWillMount`
+ `componentWillReceiveProps`
+ `shouldComponentUpdate`
+ `componentWillUpdate`

2.`Commit`阶段
+ `componentDidMount`
+ `componentDidUpdate`
+ `componentWillUnMount`

---

https://developer.aliyun.com/article/72330
