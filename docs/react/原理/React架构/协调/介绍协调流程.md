### render阶段流程概览

render阶段的使用遍历来实现可中断的递归，递归分为"递"阶段和"归"阶段，其中“递”阶段会执行`beginWork`，"归"阶段会执行`completeWork`。

<code style="color:red">最终`beginWork`阶段会生成一棵完整的`Fiber树`；`completeWork`阶段会生成一棵完整的`DOM树`，等待commit阶段渲染到页面上.</code>


1. "递阶段"
+ "递阶段"会调用`beginWork`方法来生成`Fiber`节点
+ 首先从`RootFiber`节点开始向下深度优先遍历，为遍历到的每个Fiber节点调用`beginWork`
+ `beginWork`会根据传入的Fiber节点创建子Fiber节点，并将这两个Fiber节点连接起来

2. "归阶段"
+ "归阶段"会调用`completeWork`处理Fiber节点
+ 当某个Fiber节点执行完`completeWork`，如果其存在兄弟Fiber节点，会进入兄弟Fiber节点的"递阶段"
+ 如果不存在兄弟节点，会进入父级Fiber的"归"阶段

"递"和"归" 阶段会交错执行直到"归"到`RootFiber`，至此，render阶段的工作就结束了

---

### 举例

```javascript
function App() {
  return (
    <div>
      i am
      <span>KaSong</span>
    </div>
  )
}

ReactDOM.render(<App />, document.getElementById("root"));
```

对应的Fiber树结构：

 ![](https://raw.githubusercontent.com/superwtt/MyFileRepository/main/image/React/fiber.png)

 render阶段依次会执行：
 ```javascript
 rootFiber beginWork
 App fiber beginWork
 div fiber beginWork
 i am fiber beginWork
 i am fiber completeWork
 span fiber beginWork
 span fiber completeWork
 div fiber completeWork
 App fiber completeWork
 rootFiber completeWork
 ```